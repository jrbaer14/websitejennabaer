---
title: "countycensus"
format: html
editor: visual
---



First I ran the packages I needed to execute this project, including a variety of mapping tools.
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(dplyr)
library(tidyverse)
library(tigris)
library(sf)
library(tidycensus)
library(htmltools)
library(janitor)
library(here)
library(mapview)
library(leafsync)
library(leaflet.extras2)
options(scipen=999)
options(tigris_class = "sf")
```

I then used a census API Key to query the data I plan to look for.

```{r}
census_api_key("400666ffe99f9585382f01a246a13f9f9255452f", overwrite=TRUE)
```

I want to analyze which counties in Massachusetts have highest percentage of people reporting they have Irish ancestry. To find this information I queried the American Community Survey's most recent 2022 data.

I was able to pull the amount of people who claim Irish ancestry in every county in Massachusetts. I was also able to pull the total populations from all the counties in Massachusetts.
```{r}

irish_pop <- "B04006_049E"

irishancestry <- get_acs(geography = "county", variables = irish_pop, state = "MA", output = "wide")

irishancestry


county_pop <- "B01003_001E"

totalpopulation <- get_acs(geography = "county", variables = county_pop, state = "MA", output = "wide")

totalpopulation

```
I then created a new table combining this data to find the percentage of people who claim Irish ancestry in each county. I did this by doing a left join function to combine all of the data from the tables together. I then selected for the GEOID, Name of the counties, the estimate of the Irish descent population, and the estimate of the total population. From there, I created a new column for the percentage of people who claim Irish ancestry by using the mutate function to divide the Irish descendant population by the total population for each county. I then arranged the percent Irish variable in ascending order.


```{r}

irish_pop <- "B04006_049E"

county_pop <- "B01003_001E"

irish_and_county <- left_join(irishancestry, totalpopulation, by="GEOID")

irish_and_county %>%
  select(GEOID, NAME.x, irish_pop, county_pop)%>%
  mutate(perc_irish = (B04006_049E/B01003_001E)*100) %>%
  arrange(perc_irish)
  
  

  
  
  

```



```{r}

